<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ê–≤—Ä–æ—Ä–∞</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Comfortaa:wght@400;700&display=swap');

  body {
    margin: 0;
    font-family: 'Comfortaa', cursive;
    background: linear-gradient(135deg, #0d0415, #2a1238);
    color: #fff;
    overflow: hidden;
  }

  .screen {
    position: absolute;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.5s ease;
    padding: 20px;
  }

  .screen.show {
    opacity: 1;
    pointer-events: all;
  }

  h1 {
    font-size: 3em;
    margin-bottom: 20px;
    color: #fff;
    text-align: center;
    text-shadow:
      0 0 10px rgba(0,0,0,0.6),
      0 0 20px #b689f5,
      0 0 30px #d2aaff,
      0 0 40px #b689f5;
  }

  p {
    font-size: 1.3em;
    max-width: 700px;
    margin-bottom: 40px;
    text-align: center;
    color: #fff;
    text-shadow:
      0 0 5px rgba(0,0,0,0.5),
      0 0 10px #b689f5,
      0 0 15px #d2aaff;
  }

  .button-container {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  button {
    padding: 15px 30px;
    margin: 10px;
    font-size: 1.2em;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    background: #b689f5;
    color: #fff;
    box-shadow: 0 0 20px #b689f5;
    transition: 0.3s;
  }

  button:hover {
    box-shadow: 0 0 40px #d2aaff;
    transform: scale(1.05);
  }

  .score {
    position: absolute;
    top: 20px;
    right: 30px;
    font-size: 1.5em;
    text-shadow: 0 0 15px #b689f5;
  }

  .history {
    margin-top: 20px;
    max-width: 400px;
    text-align: left;
  }

  .history li {
    margin-bottom: 8px;
  }
</style>
</head>
<body>

<div class="score">–û—á–∫–∏: 0</div>

<!-- –≠–∫—Ä–∞–Ω 1 ‚Äî –í—Ö–æ–¥ -->
<div id="screen1" class="screen show">
  <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ê–≤—Ä–æ—Ä—É ‚ú®</h1>
  <p>–¢—ã –Ω–∞—à–µ–ª —Å–∞–º–æ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –º–µ—Å—Ç–æ –≤–æ –≤—Å–µ–ª–µ–Ω–Ω–æ–π. –ó–¥–µ—Å—å —Ç–µ–±—è –≤—ã—Å–ª—É—à–∞—é—Ç, –ø–æ–º–æ–≥—É—Ç, –∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—Å—É–¥—è—Ç. –¢—ã –¥–æ–º–∞.</p>
  <button onclick="nextScreen(2)">–ù–∞—á–∞—Ç—å</button>
</div>

<!-- –≠–∫—Ä–∞–Ω 2 ‚Äî –í—ã–±–æ—Ä —Ä–æ–ª–∏ -->
<div id="screen2" class="screen">
  <h1>–ö–µ–º —Ç—ã —Ö–æ—á–µ—à—å –±—ã—Ç—å?</h1>
  <div class="button-container">
    <button onclick="selectRole('–ß–µ–ª–æ–≤–µ–∫')">–ß–µ–ª–æ–≤–µ–∫</button>
    <button onclick="selectRole('–°–≤–µ—Ç')">–°–≤–µ—Ç</button>
  </div>
</div>

<!-- –≠–∫—Ä–∞–Ω 3 ‚Äî –í–æ–ø—Ä–æ—Å—ã -->
<div id="screen3" class="screen">
  <h1 id="roleTitle"></h1>
  <p id="questionText"></p>
  <div class="button-container" id="answerButtons"></div>
</div>

<!-- –≠–∫—Ä–∞–Ω 4 ‚Äî –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç -->
<div id="screen4" class="screen">
  <h1>–¢–≤–æ–π –∫–∞–±–∏–Ω–µ—Ç üåí‚ú®</h1>
  <p>–†–æ–ª—å: <span id="userRole"></span></p>
  <p>–û—á–∫–∏: <span id="userScore"></span></p>

  <h2>–ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π:</h2>
  <ul class="history" id="historyList"></ul>

  <button onclick="restart()">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
</div>

<script>
  let score = 0;
  let role = '';
  let history = [];
  let transitioning = false;

  const questions = {
    '–ß–µ–ª–æ–≤–µ–∫': {
      text: '–ß—Ç–æ —Å–µ–π—á–∞—Å –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ —à—É–º–∏—Ç –≤–Ω—É—Ç—Ä–∏ —Ç–µ–±—è?',
      answers: ['–•–æ—á—É –≥–æ–≤–æ—Ä–∏—Ç—å', '–•–æ—á—É –º–æ–ª—á–∞—Ç—å']
    },
    '–°–≤–µ—Ç': {
      text: '–ß–µ–º —Ö–æ—á–µ—à—å –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å–µ–≥–æ–¥–Ω—è?',
      answers: ['–î–µ–ª–∏—Ç—å—Å—è —Å–≤–µ—Ç–æ–º', '–ü–æ–º–æ–≥–∞—Ç—å –¥—Ä—É–≥–∏–º']
    }
  };

  function fadeOut(element, callback) {
    element.style.opacity = 0;
    setTimeout(() => {
      element.classList.remove('show');
      if(callback) callback();
    }, 500);
  }

  function fadeIn(element) {
    element.classList.add('show');
    element.style.opacity = 1;
  }

  function nextScreen(num) {
    if (transitioning) return;
    transitioning = true;

    const current = document.querySelector('.screen.show');
    fadeOut(current, () => {
      if (num === 4) {
        // –í –∫–æ–Ω—Ü–µ –Ω–∞—á–∏—Å–ª—è–µ–º –æ—á–∫–∏
        score = 20; // –º–∞–∫—Å–∏–º—É–º 20 –¥–ª—è –≤—Å–µ—Ö
        showCabinet();
      }
      const next = document.getElementById('screen'+num);
      fadeIn(next);
      transitioning = false;
    });
  }

  function selectRole(chosenRole) {
    role = chosenRole;
    history.push(`–í—ã–±—Ä–∞–Ω–∞ —Ä–æ–ª—å: ${role}`);

    document.getElementById('roleTitle').textContent = `–¢—ã –≤—ã–±—Ä–∞–ª: ${role}`;

    const q = questions[role];
    document.getElementById('questionText').textContent = q.text;

    const answerContainer = document.getElementById('answerButtons');
    answerContainer.innerHTML = '';
    q.answers.forEach(ans => {
      const btn = document.createElement('button');
      btn.textContent = ans;
      btn.onclick = () => answerSelected(ans);
      answerContainer.appendChild(btn);
    });

    nextScreen(3);
  }

  function answerSelected(answer) {
    history.push(`–í—ã–±–æ—Ä: ${answer}`);
    nextScreen(4); // –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –æ—á–∫–æ–≤ –∏ –ø–µ—Ä–µ—Ö–æ–¥ –≤ –∫–∞–±–∏–Ω–µ—Ç
  }

  function showCabinet() {
    document.querySelector('.score').textContent = '–û—á–∫–∏: ' + score;
    document.getElementById('userRole').textContent = role;
    document.getElementById('userScore').textContent = score;

    const historyList = document.getElementById('historyList');
    historyList.innerHTML = '';
    history.forEach(item => {
      const li = document.createElement('li');
      li.textContent = item;
      historyList.appendChild(li);
    });
  }

  function restart() {
    score = 0;
    role = '';
    history = [];
    document.querySelector('.score').textContent = '–û—á–∫–∏: 0';
    nextScreen(1);
  }
</script>

</body>
</html>
